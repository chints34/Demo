C51 COMPILER V7.08   KEYPAD                                                                12/19/2013 17:40:13 PAGE 1   


C51 COMPILER V7.08, COMPILATION OF MODULE KEYPAD
OBJECT MODULE PLACED IN .\keypad.obj
COMPILER INVOKED BY: C:\Keil2\C51\BIN\C51.EXE ..\..\keypad.c BROWSE DEBUG OBJECTEXTEND PRINT(.\keypad.lst) OBJECT(.\keyp
                    -ad.obj)

line level    source

   1          #include<reg51.h>
   2          sbit r0=P3^0;
   3          sbit r1=P3^1;
   4          sbit r2=P3^2;
   5          sbit r3=P3^3;
   6          sbit c0=P3^4;
   7          sbit c1=P3^5;
   8          sbit c2=P3^6;
   9          sbit c3=P3^7;
  10          code unsigned char keypad_lut[4][4]=
  11          {
  12          1,2,3,4,
  13          5,6,7,8,
  14          9,10,11,12,
  15          13,14,15,16
  16          };
  17          bit colscan()
  18          {
  19   1      return (c0&c1&c2&c3);
  20   1      }
  21          unsigned char keyscan()
  22          {
  23   1      unsigned char row,col;
  24   1      c0=c1=c2=c3=1;
  25   1      r0=r1=r2=r3=0;
  26   1      while(colscan());
  27   1      r0=0; r1=r2=r3=1;
  28   1       if(!colscan())
  29   1       {
  30   2        row=0; goto colcheck;
  31   2       }
  32   1      
  33   1      r1=0; r0=r2=r3=1;
  34   1       if(!colscan())
  35   1       {
  36   2        row=1; goto colcheck;
  37   2       }
  38   1      
  39   1      r2=0; r1=r0=r3=1;
  40   1       if(!colscan())
  41   1       {
  42   2        row=2; goto colcheck;
  43   2       }
  44   1      
  45   1      r3=0; r1=r2=r0=1;
  46   1       if(!colscan())
  47   1       {
  48   2        row=3; goto colcheck;
  49   2       }
  50   1       colcheck:
  51   1                if(c0==0) col=0;
  52   1                else if(c1==0) col=1;
  53   1                else if(c2==0) col=2;
  54   1                else if(c3==0) col=3;
C51 COMPILER V7.08   KEYPAD                                                                12/19/2013 17:40:13 PAGE 2   

  55   1         return keypad_lut[row][col];
  56   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    150    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)

C51 COMPILER V7.08   SWITCHTEST                                                            10/12/2010 02:35:24 PAGE 1   


C51 COMPILER V7.08, COMPILATION OF MODULE SWITCHTEST
OBJECT MODULE PLACED IN C:\ISP's\switchtest.obj
COMPILER INVOKED BY: C:\Keil2\C51\BIN\C51.EXE switchtest.c BROWSE DEBUG OBJECTEXTEND OBJECT(C:\ISP's\switchtest.obj)

line level    source

   1          #include<reg51.h>
   2          #include"uart.h"
   3          sbit sw1=P1^4;         sbit sw3=P1^6;
   4          sbit sw2=P1^5;         sbit sw4=P1^7;
   5          
   6          void switch_test()
   7                   {
   8   1              bit flag=0;
   9   1              unsigned int dly=100,i;
  10   1              unsigned char ch=0,g,m;
  11   1              print("You are in switch test...\n\r");
  12   1              print("Connect P1.4-P1.7 with sw1-sw4 of 8051 Development Board\n\r");
  13   1          
  14   1         TST:print("Enter any key to test Switchs...\n\r");
  15   1              uart_rx();  
  16   1              
  17   1              if(ch==4) //ch will be 4 when all 4 switches are tested. 
  18   1              {
  19   2                              ch=0;
  20   2                  print("all switches tested\n\r");
  21   2                              print("Do You want to test once more?press(y)for Yes and (n)for exit\n\r");
  22   2                      g = uart_rx();
  23   2                      if(g=='y'||g=='Y')
  24   2                      {
  25   3                                       print("test the switch\n\r");
  26   3                               ch=ch;
  27   3                               goto TST;
  28   3                       }
  29   2                      else if(g=='n'||g=='N')
  30   2                      {
  31   3                               return;
  32   3                              }
  33   2                              else
  34   2                          {
  35   3                          print("Invalid key is entered!try again\n\r");
  36   3                              goto SWT;
  37   3                          }
  38   2                                              
  39   2                 
  40   2              } //end of if(ch==4)
  41   1        
  42   1        print("press switch NO. to test...\n\r");
  43   1              ch=uart_rx();   
  44   1        ch=ch+1;
  45   1        uart_tx(ch+48);
  46   1        print("within 100ms of time to test\n\r");
  47   1        
  48   1         for(i=2000;i>0;i--)
  49   1            {
  50   2             for(i=255;i>0;i--);
  51   2              
  52   2              if(!(sw1&&sw2&&sw3&&sw4))
  53   2              {
  54   3                      flag=1;
  55   3                              
C51 COMPILER V7.08   SWITCHTEST                                                            10/12/2010 02:35:24 PAGE 2   

  56   3                              break;
  57   3              
  58   3              }
  59   2            }
  60   1                              
  61   1                
  62   1              if(flag==1)
  63   1            {
  64   2             if(sw1==0)
  65   2               {
  66   3               ch=1;
  67   3               }
  68   2             else if(sw2==0)
  69   2               {
  70   3               ch=2;    
  71   3               }
  72   2             else if(sw3==0)
  73   2               {
  74   3                ch=3;
  75   3               }
  76   2             else if(sw4==0)
  77   2               {
  78   3                ch=4;
  79   3               }
  80   2             else
  81   2               {
  82   3                 print("switch");
  83   3                 uart_tx(ch+48);
  84   3                 print("is not working\n\r");
  85   3                         goto TST;
  86   3               }
  87   2                 }//end of if(flag==1)
  88   1                        
  89   1              else
  90   1             {
  91   2             print("switch");
  92   2             uart_tx(ch+48);
  93   2                 print("is not pressed within 100ms\n\r");
  94   2             ch=ch-1;
  95   2             goto TST;
  96   2             }
  97   1         
  98   1          print("sw");
  99   1          uart_tx(ch+48);
 100   1          print(" is succesfully pressed\n\r");
 101   1              print("see WHETHER the switch entered by you is equal to the switch display?\n\r");
 102   1        
 103   1      MET:  print("Enter (y)for yes and (n) for no\n\r");
 104   1             m=uart_rx();
 105   1             if(m=='n'||m=='n')
 106   1             {
 107   2               print("connection problem. rectify connection according to below specification\n\r");
 108   2               print("Connect P1.4-P1.7 with sw1-sw4 of 8051 Development Board\n\r");
 109   2               goto TST;
 110   2             }
 111   1             else if(m=='y'||m=='Y')
 112   1             {
 113   2         
 114   2                 SWT:print("Do you want to continue to test next switch?\n\r");
 115   2         
 116   2                 print("press(y)for Yes and (n)for exit\n\r");
 117   2             
C51 COMPILER V7.08   SWITCHTEST                                                            10/12/2010 02:35:24 PAGE 3   

 118   2                 g = uart_rx();
 119   2             
 120   2                                 if(g=='y'||g=='Y')
 121   2                              {
 122   3                                       print("test Next switch\n\r");
 123   3                               ch=ch;
 124   3                               goto TST;
 125   3                              }
 126   2                             else if(g=='n'||g=='N')
 127   2                                   {
 128   3                                        return;
 129   3                                       }
 130   2                                 else
 131   2                                       {
 132   3                                          print("Invalid key you entered!try again\n\r");
 133   3                                              goto SWT;
 134   3                                       }
 135   2             }
 136   1            else
 137   1             {
 138   2             print("invalid key entered !try again\n\r");
 139   2             goto MET;
 140   2             }         
 141   1           
 142   1        }//END OF SWITCH_TEST FN


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    455    ----
   CONSTANT SIZE    =    754    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----       1
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
